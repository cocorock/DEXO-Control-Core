<?xml version="1.0"?>
<launch>
  <!-- 
    Launch file for testing a single motor with the reduced control node.
  -->

  <!-- Load configurations for each node -->
  <rosparam file="$(find exoskeleton_control)/config/single_motor_config.yaml" command="load" ns="single_motor_control_node"/>
  <rosparam file="$(find exoskeleton_control)/config/emergency_stop_config.yaml" command="load" ns="emergency_stop_node"/>

  <!-- Single Motor Control Node -->
  <node name="single_motor_control_node" pkg="exoskeleton_control" type="single_motor_control_node.py" output="screen">
    <remap from="MotorStatus" to="/exoskeleton/motor_status"/>
    <remap from="e_stop_trigger" to="/exoskeleton/emergency_stop"/>
    <!-- Receives forward calibration triggers from emergency_stop -->
    <remap from="calibration_trigger_fw" to="/calibration_trigger_fw"/>
  </node>

  <!-- Emergency Stop Node -->
  <node name="emergency_stop_node" pkg="exoskeleton_control" type="emergency_stop_node.py" output="screen">
    <remap from="MotorStatus" to="/exoskeleton/motor_status"/>
    <remap from="stop_trigger" to="/exoskeleton/stop_trigger"/>
    <remap from="ExoskeletonState" to="/exoskeleton/state"/>
    <remap from="e_stop_trigger" to="/exoskeleton/emergency_stop"/>
    <!-- Receives manual calibration triggers from dummy_crutches -->
    <remap from="manual_calibration_trigger" to="/manual_calibration_trigger"/>
    <!-- Publishes forward calibration triggers to motor control -->
    <remap from="calibration_trigger_fw" to="/calibration_trigger_fw"/>
  </node>

  

</launch>
